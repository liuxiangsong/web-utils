# 正则表达式

## 符号

- 量词符：用来设定某个模式出现的次数

  | 符号  | 说明              |
  | :---: | :---------------- |
  |  \*   | 重复 0 次或更多次 |
  |   +   | 重复 1 次或更多次 |
  |   ?   | 重复 0 次或 1 次  |
  |  {n}  | 重复 n 次         |
  | {n,}  | 至少重复 n 次     |
  | {n,m} | 重复 n 到时 m 次  |

- 预定义类：指某些常见模式的简写方式

  | 符号  | 说明                                                        |
  | :---: | :---------------------------------------------------------- |
  |  \d   | 匹配 0-9 之间的任一数字，相当于[0-9]                        |
  |  \D   | 匹配 0-9 以外的字符，相当于[^0-9]                           |
  |  \w   | 匹配任意的字母、数字或下划线，相当于[A-Za-z0-9_]            |
  |  \W   | 匹配除字母、数字或下划线以外的字符，相当于[^a-za-z0-9_]     |
  |  \s   | 匹配空格(含制表符、换页符等不可见字符)，相当于[ \f\n\r\t\v] |
  |  \S   | 匹配非空格的可见字符，相当于[^ \f\n\r\t\v]                  |

- 边界符

  - ^ ：以某某开头；在[^]时，表示取反
  - \$ ：以某某结尾

- 括号

  - 大括号：匹配大括号中量词数量的长度
  - 中括号：匹配中括号中任意**一个**字符
  - 小括号：小括号中的表达示为一组

- 其它符号
  - 点：匹配除“\n”和"\r"之外的任何单个字符。要匹配包括“\n”和"\r"在内的任何字符，使用像“[\s\S]”的模式。
  - | ： 将两个匹配条件进行逻辑“或”（or）运算

## 创建正则表达式

- 字面量创建方式：const reg = /pattern/flags
- 实例创建方式： const reg = new RegExp(pattern,flags)

pattern:正则表达式
flags:修饰符

- i 忽略大小写匹配
- g 全局匹配
- m 多行匹配

## 常用方法

[参考：MDN 正则表达式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)

- replace

  - 语法：str.replace(_regexp|substr_, _newSubstr|function_)
  - eg:'123'.replace(/\d/g,(m,index)=>{return `a${m}a`})
  - 数字千分位格式化(小数位不格式化)：'123456.2122'.replace(/(\d)(?=(\d{3})+\.)/g, '$&,')
  - 数字千分位格式化(小数位格式化)：'123456.2122'.replace(/\B(?=(\d{3})+(?!\d))/g, ',')
  - 手机号脱敏处理：'13312345678'.replace(/^(\d{3})\d{4}(\d+)/,"$1****$2")
  - 每 11 位加逗号分隔：'12345678901234567890'.replace(/(\d{11})(?=\d)/g,'\$1,')
  - '搜索关键字加粗'.replace(/(关键字)/ig,'<b>$1</b>')

- match

  - 正则表达式为全局匹配时，返回所有符合正则的结果（数组） eg:const arr= '123'.match(/\d/g)
  - 引用匹配组: '2020-01-01'.match(/^\d{4}([-\/])\d{2}\1\d{2}\$/)

- 总结：
  - 捕获组：
    - 非捕获组：(?:x)。 eg：'www.baidu.com'.match(/(\w+\.\w+\.(?:com|cn))/)
    - 具名捕获组：(?<组别名>x)。 eg：'abc'.match(/(?<名称>b)/)
  
  - 非贪婪模式：修饰匹配次数的特殊符号后再加上一个 "?" 号
    - eg：'abbb'.match(/ab+?/)
  
  - 断言匹配：
    - 向前断言：(?=条件值)  
      - eg：/\d*(?=c)/.exec('a123b456c')
      - eg：每三位数用逗号分隔 '12345689'.replace(/(\d{3})(?=\d)/g,'\$1,')
    - 向后断言：(?<=条件值)
      - eg: /(?<=b)\d*/.exec('a123b456c')
      - eg: 获取路径中文件名   path.replace(/(.+\\)/,'') 或 path.match(/(?<=\\)(\w+\.\w+)$/)?.[0]
